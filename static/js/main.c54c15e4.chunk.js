(this.webpackJsonpfreeql=this.webpackJsonpfreeql||[]).push([[1],{11:function(e,n,t){"use strict";t.d(n,"a",(function(){return C})),t.d(n,"n",(function(){return k})),t.d(n,"b",(function(){return P})),t.d(n,"m",(function(){return B})),t.d(n,"o",(function(){return x})),t.d(n,"k",(function(){return q})),t.d(n,"g",(function(){return g})),t.d(n,"f",(function(){return O})),t.d(n,"e",(function(){return j})),t.d(n,"j",(function(){return y})),t.d(n,"d",(function(){return h})),t.d(n,"h",(function(){return v})),t.d(n,"i",(function(){return m})),t.d(n,"l",(function(){return p}));var r=t(15),a=t.n(r),u=t(20),c=t(2),i=t(23),o=t.n(i),s=t(9),l=t(8),d=t(32),f=function(e,n){e.present=e.present.union(n)},p={totalH:{value:"unique_1",label:"totalH"},ph:{value:"unique_2",label:"pH"},alk:{value:"unique_3",label:"Alkalinity^1"},otherAlk:{value:"unique_4",label:"Other Alkalinity"}},m=Object(s.b)("getNewComponentDB",function(){var e=Object(u.a)(a.a.mark((function e(n,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d.b)(n));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),b={present:c.d(),conc:c.b(),atEquilibrium:c.e(),componentDB:{components:null,hPlusValue:null,waterValue:null},hPlusOption:p.totalH},g=function(e){return e.components.present},h=function(e){return e.components.componentDB},v=function(e){return e.components.hPlusOption},y=function(e){return h(e).waterValue},O=Object(l.a)([function(e){return e.components.conc},h,v],(function(e,n,t){return t===p.ph?e.update(n.hPlusValue,(function(e){return o()(e)?Math.pow(10,-e):e})):e})),j=Object(l.a)([function(e){return e.components.atEquilibrium},h,v],(function(e,n,t){return t===p.ph?e.add(n.hPlusValue):e})),w=(Object(l.a)([j,function(e,n){return n.component}],(function(e,n){return e.has(n)})),Object(s.c)({name:"components",initialState:b,reducers:{addComponents:function(e,n){f(e,n.payload)},removeComponents:function(e,n){!function(e,n){e.present=e.present.subtract(n),e.conc=e.conc.deleteAll(n)}(e,n.payload)},componentValueChanged:function(e,n){!function(e,n,t){var r=o()(t)?Number(t):null;e.conc=e.conc.set(n,r)}(e,n.payload.component,n.payload.value)},putComponentsAtEquilibrium:function(e,n){!function(e,n){e.atEquilibrium=e.atEquilibrium.union(n)}(e,n.payload)},removeComponentsFromEquilibrium:function(e,n){!function(e,n){e.atEquilibrium=e.atEquilibrium.subtract(n)}(e,n.payload)},hPlusOptionChanged:function(e,n){!function(e,n){e.hPlusOption=n}(e,n.payload)}},extraReducers:function(e){e.addCase(m.pending,(function(e,n){Object.assign(e,b)})).addCase(m.fulfilled,(function(e,n){var t=n.payload;e.componentDB=t,f(e,[t.hPlusValue])}))}})),E=w.actions,C=E.addComponents,k=E.removeComponents,P=E.componentValueChanged,B=E.putComponentsAtEquilibrium,x=E.removeComponentsFromEquilibrium,q=E.hPlusOptionChanged;n.c=w.reducer},13:function(e,n,t){"use strict";t.d(n,"d",(function(){return q})),t.d(n,"c",(function(){return S})),t.d(n,"a",(function(){return A})),t.d(n,"l",(function(){return D})),t.d(n,"i",(function(){return E})),t.d(n,"k",(function(){return j})),t.d(n,"j",(function(){return y})),t.d(n,"g",(function(){return C})),t.d(n,"e",(function(){return P})),t.d(n,"f",(function(){return k})),t.d(n,"h",(function(){return h}));var r,a=t(7),u=t(10),c=t(15),i=t.n(c),o=t(20),s=t(2),l=t(9),d=t(8),f=t(11),p=t(70),m=function(e,n,t,r){var a=null,u=null,c=null;return function(i){for(var o=arguments.length,l=new Array(o>1?o-1:0),d=1;d<o;d++)l[d-1]=arguments[d];Object(p.a)(a,l)||(u=s.e(),c=n,a=l);var f=i.subtract(u),m=u.subtract(i);return f.size&&(c=f.reduce((function(e,n){return t.apply(void 0,[e,n].concat(l))}),c)),m.size&&(c=m.reduce((function(e,n){return r.apply(void 0,[e,n].concat(l))}),c)),u=i,e.apply(void 0,[c].concat(l))}},b=function(e,n,t,r,a){return function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return Object(d.b)((function(n,r){return!0===r?e.apply(void 0,[n].concat(t)):Object(d.d)(n)}),!0)}(m,n,t,r)(e,a)},g=t(32),h=Object(l.b)("getNewSpeciesDB",function(){var e=Object(o.a)(i.a.mark((function e(n,t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(g.c)(n));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),v={speciesEnabled:{aqs:s.e(),solids:s.e(),gases:s.e()},logKChanges:{aqs:s.b(),solids:s.b(),gases:s.b()},speciesDB:{aqs:null,solids:null,gases:null}},y=function(e){return e.species.speciesDB},O=function(e){return Object(d.a)([y],(function(n){return s.b().withMutations((function(t){var r,c=Object(u.a)(n[e]);try{var i=function(){var e,n=Object(a.a)(r.value,2),c=n[0],i=n[1].components,o=Object(u.a)(i);try{for(o.s();!(e=o.n()).done;){var l=Object(a.a)(e.value,1)[0];t.update(l,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.e();return e.add(c)}))}}catch(d){o.e(d)}finally{o.f()}};for(c.s();!(r=c.n()).done;)i()}catch(o){c.e(o)}finally{c.f()}}))}))},j=function(e){return e.species.speciesEnabled},w=function(e){return function(n){return n.species.speciesDB[e]}},E=(r=function(e){return b([f.g,w(e),O(e),f.j],{speciesOccurences:s.b(),speciesCouldBePresent:s.d()},(function(e,n,t,r,a){var c,i=e.speciesOccurences,o=e.speciesCouldBePresent;return{speciesOccurences:i.withMutations((function(e){c=o.withMutations((function(c){var i,o,s=Object(u.a)(null!==(i=r.get(n))&&void 0!==i?i:[]);try{for(s.s();!(o=s.n()).done;){var l=o.value;e.update(l,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1})),t.get(l).components.delete(a).size===e.get(l)&&c.add(l)}}catch(d){s.e(d)}finally{s.f()}}))})),speciesCouldBePresent:c}}),(function(e,n,t,r){var a,c=e.speciesOccurences,i=e.speciesCouldBePresent;return{speciesOccurences:c.withMutations((function(e){a=i.withMutations((function(t){var a,c,i=Object(u.a)(null!==(a=r.get(n))&&void 0!==a?a:[]);try{for(i.s();!(c=i.n()).done;){var o=c.value;e.update(o,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e-1})),t.remove(o)}}catch(s){i.e(s)}finally{i.f()}}))})),speciesCouldBePresent:a}}),(function(e,n){var t;return e.speciesCouldBePresent.sortBy((t=n,function(e){return t.get(e).index}))}))},Object(d.c)({aqs:r("aqs"),solids:r("solids"),gases:r("gases")})),C=function(e){return e.species.logKChanges},k=function(e,n){var t=n.type,r=n.specie;return e.species.logKChanges[t].get(r)},P=function(e,n){var t=n.type,r=n.specie;return e.species.speciesEnabled[t].has(r)},B=Object(l.c)({name:"species",initialState:v,reducers:{enableSpecies:function(e,n){e=function(e,n,t){e.speciesEnabled[n]=e.speciesEnabled[n].union(t)}(e,n.payload.type,n.payload.species)},disableSpecies:function(e,n){e=function(e,n,t){e.speciesEnabled[n]=e.speciesEnabled[n].subtract(t)}(e,n.payload.type,n.payload.species)},addLogKChange:function(e,n){e=function(e,n,t,r){e.logKChanges[n]=e.logKChanges[n].set(t,r)}(e,n.payload.type,n.payload.specie,n.payload.value)},removeLogKChange:function(e,n){e=function(e,n,t){e.logKChanges[n]=e.logKChanges[n].delete(t)}(e,n.payload.type,n.payload.specie)}},extraReducers:function(e){e.addCase(h.pending,(function(e,n){Object.assign(e,v)})).addCase(h.fulfilled,(function(e,n){var t=n.payload;e.speciesDB=t}))}}),x=B.actions,q=x.enableSpecies,S=x.disableSpecies,A=x.addLogKChange,D=x.removeLogKChange;n.b=B.reducer},31:function(e,n,t){"use strict";t.d(n,"a",(function(){return h})),t.d(n,"e",(function(){return O})),t.d(n,"d",(function(){return b})),t.d(n,"c",(function(){return y}));var r=t(15),a=t.n(r),u=t(55),c=t(20),i=t(2),o=t(9),s=t(8),l=t(6);function d(e){return function e(n){var t=n.data;if(null===n||"object"!==typeof n)return n;if(n._ImList)return i.a(e(t));if(n._ImMap)return i.b(e(t));if(n._ImOrd)return i.c(e(t));if(n._ImSet)return i.e(e(t));if(n._ImOrdSet)return i.d(e(t));if(Array.isArray(n))return n.map(e);var r={};for(var a in n)r[a]=e(n[a]);return r}(JSON.parse(e))}var f=t(11),p=t(13),m=t(71),b=Object(s.c)({componentsConc:f.f,componentsAtEquilibrium:f.e,speciesPresent:p.k,logKChanges:p.g,speciesDB:p.j,componentDB:f.d}),g=m.a(new function(){return new Worker(t.p+"static/js/CalculateResultWorker.0713872e.worker.js")}),h=Object(o.b)("calculateNewResult",function(){var e=Object(c.a)(a.a.mark((function e(n,t){var r,c,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.getState,n.speciesDB,n.componentDB,o=Object(u.a)(n,["speciesDB","componentDB"]),null===(r=O(c(),{context:n}))||void 0===r){e.next=6;break}e.t0=r,e.next=11;break;case 6:return e.t1=d,e.next=9,g.calculate((a=o,JSON.stringify(function e(n){if(null===n||"object"!==typeof n)return n;var t,r,a,u,c;if(i.a.isList(n))return t={},Object(l.a)(t,"_ImList",!0),Object(l.a)(t,"data",Array.from(n).map(e)),t;if(i.b.isMap(n))return r={},Object(l.a)(r,"_ImMap",!0),Object(l.a)(r,"data",Array.from(n.entries()).map(e)),r;if(i.c.isOrderedMap(n))return a={},Object(l.a)(a,"_ImOrd",!0),Object(l.a)(a,"data",Array.from(n.entries()).map(e)),a;if(i.e.isSet(n))return u={},Object(l.a)(u,"_ImSet",!0),Object(l.a)(u,"data",Array.from(n).map(e)),u;if(i.d.isOrderedSet(n))return c={},Object(l.a)(c,"_ImOrdSet",!0),Object(l.a)(c,"data",Array.from(n).map(e)),c;if(Array.isArray(n))return n.map(e);var o={};for(var s in n)o[s]=e(n[s]);return o}(a))));case 9:e.t2=e.sent,e.t0=(0,e.t1)(e.t2);case 11:return s=e.t0,e.abrupt("return",{result:s});case 13:case"end":return e.stop()}var a}),e)})));return function(n,t){return e.apply(this,arguments)}}()),v={calculations:i.a(),results:i.b()},y=function(e){return e.results.calculations},O=Object(s.a)([function(e){return e.results.results},function(e,n){return n.context}],(function(e,n){return e.get(i.g(n))})),j=Object(o.c)({name:"results",initialState:v,extraReducers:function(e){e.addCase(h.pending,(function(e,n){e.calculations=e.calculations.push(n.meta.arg)})).addCase(h.fulfilled,(function(e,n){e.results=e.results.set(i.g(n.meta.arg),n.payload.result)})).addCase(h.rejected,(function(e,n){console.log(n.error),e.results=e.results.set(i.g(n.meta.arg),n.error)})).addCase(f.i.pending,(function(e,n){g.changeComponentDB(n.meta.arg)})).addCase(p.h.pending,(function(e,n){g.changeSpeciesDB(n.meta.arg)}))}});n.b=j.reducer},32:function(e,n,t){"use strict";t.d(n,"c",(function(){return p})),t.d(n,"b",(function(){return m})),t.d(n,"d",(function(){return g})),t.d(n,"a",(function(){return b}));var r=t(7),a=t(10),u=t(68),c=t(21),i=function(e,n,t){return e[n[t].row][n[t].column]},o=function(e,n,t,r){return e[n[t].row][n[t].column+r*n[t].stride]};var s=function(e){return fetch(e).then((function(e){var n=e.body.getReader(),t="",u=[],c=function(e,n){var u=function(e){var n,t=[],r=!1,u=0,c=0,i=0,o=0,s=Object(a.a)(e.matchAll(/("")|(")|(,)|(?:(\r\n)|(\n)|(\r))($)?|$/g));try{for(s.s();!(n=s.n()).done;){var l=n.value;if(t[i]=t[i]||[],t[i][o]=t[i][o]||"",l[7])break;t[i][o]+=e.substring(c,l.index),l[1]?(r&&(t[i][o]+='"'),c=l.index+2):l[2]?(r=!r,c=l.index+1):l[3]?(++o,c=l.index+1):l[4]?(++i,o=0,u=c=l.index+2):(l[5]||l[6])&&(++i,o=0,u=c=l.index+1)}}catch(d){s.e(d)}finally{s.f()}return[t,e.substring(u)]}(t+new TextDecoder("utf-8").decode(e)),c=Object(r.a)(u,2),i=c[0],o=c[1];return n?i:(t=o,i.slice(0,i.length-1))};return new Promise((function(e){!function t(){return n.read().then((function(n){if(n.done)return u=u.concat(c(n.value,!0)),void e(u);u=u.concat(c(n.value)),t()}))}()}))}))},l=t(37),d=t.n(l),f=t(2),p=function(e){var n=e.url,t=e.options,l=e.type;e.callback;if("link"===l)return Promise.all([n].concat(Object(c.a)(t.labels.urls)).map((function(e){return s(e)}))).then((function(e){var n=Object(u.a)(e),c=n[0],s=n.slice(1).map((function(e){return d()(e,t.linesPerItem)})).map((function(e){return e.map((function(e){return i(e,t.labels,"id")}))})),l=f.b().withMutations((function(e){var n,u=Object(a.a)(s.entries());try{for(u.s();!(n=u.n()).done;){var c,i=Object(r.a)(n.value,2),o=i[0],l=i[1],d=Object(a.a)(l);try{for(d.s();!(c=d.n()).done;){var f=c.value;e.set(Number(f),t.labels.labelMap[o])}}catch(p){d.e(p)}finally{d.f()}}}catch(p){u.e(p)}finally{u.f()}})),p=d()(c,t.linesPerItem).filter((function(e){return Number(e[0][0])})),m={aqs:null,solids:null,gases:null};return m.aqs=f.b().withMutations((function(e){m.solids=f.b().withMutations((function(n){m.gases=f.b().withMutations((function(r){var u,c={aqs:e,solids:n,gases:r},s=Object(a.a)(p);try{var d=function(){var e,n,r=u.value,a=Number(i(r,t,"id")),s=c[null!==(e=l.get(a))&&void 0!==e?e:"aqs"];s.set(a,{name:i(r,t,"name"),charge:Number(i(r,t,"charge")),logK:Number(i(r,t,"logK")),label:null!==(n=l.get(a))&&void 0!==n?n:0,index:s.size,components:f.c().withMutations((function(e){for(var n=0;n<i(r,t,"numComponents");++n){var a=Number(o(r,t,"components",n)),u=Number(o(r,t,"componentAmts",n));e.set(a,u)}}))})};for(s.s();!(u=s.n()).done;)d()}catch(m){s.e(m)}finally{s.f()}}))}))})),m}))},m=function(e){var n=e.url,t=e.options,r=e.type;e.callback;if("link"===r)return s(n).then((function(e){return d()(e,t.linesPerItem)})).then((function(e){return{hPlusValue:t.hPlusValue,waterValue:t.waterValue,components:f.c(e.filter((function(e){return Number(i(e,t,"id"))})).map((function(e){return[Number(i(e,t,"id")),{name:i(e,t,"name"),charge:Number(i(e,t,"charge"))}]})))}}))},b={url:"/FreeQL/assets/defaultdb/comp.vdb",type:"link",options:{linesPerItem:1,id:{row:0,column:0},name:{row:0,column:1},charge:{row:0,column:2},hPlusValue:330,waterValue:2}},g={url:"/FreeQL/assets/defaultdb/thermo.vdb",type:"link",options:{linesPerItem:3,id:{row:0,column:0},name:{row:0,column:1},charge:{row:0,column:6},logK:{row:0,column:3},numComponents:{row:0,column:10},components:{row:1,column:1,stride:2},componentAmts:{row:1,column:0,stride:2},labels:{urls:["/FreeQL/assets/defaultdb/type6.vdb","/FreeQL/assets/defaultdb/gases.vdb"],linesPerId:3,id:{row:0,column:0},labelMap:["solids","gases"]}}}},39:function(e,n,t){"use strict";var r=t(0),a=t.n(r);n.a=function(e){return a.a.createElement("div",{className:"flex-"+(e.start?e.start+"-":"")+"grow-1 "+(e.end?"flex-"+e.end+"-grow-0":"")},e.children)}},53:function(e,n,t){"use strict";t.d(n,"g",(function(){return b})),t.d(n,"h",(function(){return g})),t.d(n,"f",(function(){return h})),t.d(n,"e",(function(){return s})),t.d(n,"b",(function(){return d})),t.d(n,"d",(function(){return l})),t.d(n,"c",(function(){return f}));var r=t(2),a=t(23),u=t.n(a),c=t(8),i=t(9),o={partialPressures:r.b(),gasReplacements:r.b()},s=function(e){return e.gasInput.partialPressures},l=function(e){return e.gasInput.gasReplacements},d=Object(c.a)([l],(function(e){return e.reduce((function(e,n,t){return e.update(n,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.e();return e.add(t)}))}),r.b())})),f=Object(c.a)([d],(function(e){return e.filter((function(e){return e.size>1})).reduce((function(e,n){return e.union(n)}),r.e())})),p=Object(i.c)({name:"gasInput",initialState:o,reducers:{setGasPartialPressure:function(e,n){!function(e,n,t){e.partialPressures=e.partialPressures.set(n,u()(t)?Number(t):null)}(e,n.payload.gas,n.payload.value)},setGasReplacement:function(e,n){!function(e,n,t){e.gasReplacements=e.gasReplacements.set(n,t)}(e,n.payload.gas,n.payload.component)},removeEnabledGas:function(e,n){!function(e,n){e.gasReplacements=e.gasReplacements.delete(n),e.partialPressures=e.partialPressures.delete(n)}(e,n.payload.gas)}}}),m=p.actions,b=m.setGasPartialPressure,g=m.setGasReplacement,h=m.removeEnabledGas;n.a=p.reducer},56:function(e,n,t){"use strict";var r=t(7),a=t(0);n.a=function(){var e=Object(a.useState)({width:window.innerWidth,height:window.innerHeight}),n=Object(r.a)(e,2),t=n[0],u=n[1];return Object(a.useLayoutEffect)((function(){var e=function(){u({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}},75:function(e,n,t){e.exports=t(88)},80:function(e,n,t){},81:function(e,n,t){},88:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),u=t(16),c=t.n(u),i=(t(80),t(81),t(26)),o=t(27),s=t(58),l=t(47),d=t(48),f=t(39),p=t(56),m=a.a.lazy((function(){return Promise.all([t.e(4),t.e(11)]).then(t.bind(null,224))}));var b=function(){var e=Object(p.a)().width>=768?120:72;return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,{expand:"sm",bg:"dark",variant:"dark"},a.a.createElement(f.a,{end:"sm"},a.a.createElement(i.a.Brand,{href:"/"},a.a.createElement("img",{src:"/FreeQL/assets/img/logo.png",width:"65",alt:"FreeQL"}))),a.a.createElement(i.a.Brand,{href:"/"},"FreeQL"),a.a.createElement(f.a,{end:"sm"}),a.a.createElement(i.a.Collapse,{id:"navbarTogglerDemo02"},a.a.createElement(o.a,{className:"mr-auto",style:{fontSize:"1.025rem"}},a.a.createElement(o.a.Link,{href:"https://stephmorel8910.gitbook.io/freeql/",target:"_blank"},"Help"),a.a.createElement(o.a.Link,{href:"https://github.com/SoAsEr/FreeQL/blob/master/README.md",target:"_blank"},"README"),a.a.createElement(o.a.Link,{href:"https://github.com/SoAsEr/FreeQL/",target:"_blank"},"Github")))),a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",{style:{height:"calc(100vh - "+(56+e)+"px)"}})},a.a.createElement(m,{headerHeight:56,footerHeight:e})),a.a.createElement("footer",{className:"bg-dark p-4 p-md-5 text-center"},a.a.createElement(s.a,null,a.a.createElement(l.a,null,a.a.createElement(d.a,null,a.a.createElement("span",{className:"text-light"},"Created by Stephane Morel"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g,h=t(11),v=t(6),y=t(9),O=t(31),j=t(13),w=function(e){var n=e.type;return n.endsWith("/pending")||n.endsWith("/fulfilled")||n.endsWith("/rejected")},E=function(e){return e.pending.type.substring(0,e.pending.type.lastIndexOf("/"))},C=(g={},Object(v.a)(g,E(h.i),"componentDB"),Object(v.a)(g,E(j.h),"speciesDB"),Object(v.a)(g,E(O.a),"calculateResult"),g),k=Object(y.c)({name:"loading",initialState:{componentDB:"pending",speciesDB:"pending",calculateResult:"fulfilled"},extraReducers:function(e){e.addMatcher(w,(function(e,n){var t=n.type;e[C[t.substring(0,t.lastIndexOf("/"))]]=t.substring(t.lastIndexOf("/")+1)}))}}).reducer,P=t(53),B=t(12),x=t(46),q=Object(B.c)({components:h.c,loading:k,species:j.b,gasInput:P.a,results:O.b}),S=Object(y.a)({reducer:q,middleware:Object(y.d)({serializableCheck:!1,immutableCheck:!1})}),A=document.getElementById("root");c.a.render(a.a.createElement(x.a,{store:S},a.a.createElement(b,null)),A),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[75,2,3]]]);
//# sourceMappingURL=main.c54c15e4.chunk.js.map