{"version":3,"sources":["features/components/componentsSelectors.js","features/components/componentsSlice.js","utils/createDiffSelector.js","features/species/speciesSelectors.js","features/species/speciesSlice.js","features/common/actions.js","features/species/gases/gasInputSlice.js","features/loading/loadingSlice.js","utils/readCSV.js","features/fetchDBs.js","reusable_components/CenteringDiv.js","utils/useWindowSize.js","features/equilibria/equilibriaSlice.js","features/equilibria/CalculateEquilibriumWorker.js","App.js","serviceWorker.js","index.js"],"names":["getComponentsPresent","state","components","present","getComponentDB","componentDB","getHPlusOption","hPlusOption","getWaterValue","waterValue","getComponentsConc","createSelector","conc","concs","hPlusOptions","ph","update","hPlusValue","is_number","Math","pow","getComponentsAtEquilibrium","atEquilibrium","equilComponents","add","component","componentsAtEquilibrium","has","addComponentsReducer","union","withMutations","set","totalH","value","label","getNewComponentDB","createAsyncThunk","args","thunkAPI","a","fetchComponentDB","initialState","Immutable","componentsSlice","createSlice","name","reducers","addComponents","action","payload","componentValueChanged","numberValue","Number","setComponentConcReducer","putComponentsAtEquilibrium","putComponentsAtEquilibriumReducer","removeComponentsFromEquilibrium","subtract","removeComponentsFromEquilibriumReducer","hPlusOptionChanged","val","hPlusOptionChangedReducer","extraReducers","builder","addCase","pending","Object","assign","fulfilled","db","removeComponentsWithSpecies","deleteAll","removeComponentsReducer","actions","diffMemoize","fn","initial","addReducer","removeReducer","oldArgs","oldFirstArg","reduceResult","firstArg","shallowEqualArrays","added","removed","size","reduce","prev","curr","createDiffSelector","addFunc","removeFunc","finalFunc","memoize","memoizeOptions","createSelectorCreator","mapmem","defaultMemoize","my_createSelectorCreator","getSpeciesDB","species","speciesDB","getComponentToSpeciesOfTypeFactory","type","componentToSpecies","speciesId","oldSet","getSpeciesOfTypeFactory","getSpeciesCouldBePresentOfTypeFactory","speciesOccurences","speciesCouldBePresent","componentToAdd","speciesOfType","componentToSpeciesOfType","newSpeciesCouldBePresent","get","specie","num","delete","componentToRemove","remove","sortBy","index","getSpeciesPresentOfTypeFactory","speciesEnabled","filter","map","default","speciesFactoryFactory","typeFactory","createStructuredSelector","aqs","solids","gases","getSpeciesCouldBePresent","getComponentToSpecies","getSpeciesPresent","getLogKChanges","logKChanges","getLogKChange","getIfSpecieEnabled","enableSpeciesOfTypeReducer","disableSpeciesOfTypeReducer","getNewSpeciesDB","fetchSpeciesDB","speciesSlice","enableSpecies","disableSpecies","addLogKChange","addLogKChangeReducer","removeLogKChange","removeLogKChangeReducer","createAction","removeComponents","dispatch","getState","deleteGasReducer","gasReplacements","partialPressures","getPartialPressures","gasInput","getGasReplacements","getComponentToGases","getErroredGases","componentToGases","erroredSpecies","gasInputSlice","setGasPartialPressure","gas","setGasPartialPressureReducer","setGasReplacement","setGasReplacementReducer","isAsyncAction","endsWith","getNameFromAsyncThunk","thunk","substring","lastIndexOf","actionToName","loadingSlice","addMatcher","getData","item","options","property","row","column","getDataWithStride","i","stride","fetchCSV","url","fetch","then","response","reader","body","getReader","lastLine","csvBuilt","chunkParser","chunk","partial","str","arr","quote","lastLineStart","lastMatchEnd","col","matchAll","match","parseCSVWithPartial","TextDecoder","decode","parsed","thisLastLine","slice","length","Promise","resolve","pump","read","res","done","concat","callback","all","labels","urls","tables","mainTable","labelList","labelTable","linesPerItem","chunkedLabelTable","labelMap","entries","chunkedMainTable","aqSpecies","solidSpecies","gasSpecies","id","dbAddingTo","charge","logK","componentAmt","result","chunks","componentDBDefaultParams","process","speciesDBDefaultParams","numComponents","componentAmts","linesPerId","CenteringDiv","props","className","start","end","children","useWindowSize","useState","width","window","innerWidth","height","innerHeight","windowSize","setWindowSize","useLayoutEffect","handleResize","addEventListener","removeEventListener","getCurrentCalculationArguments","componentsConc","speciesPresent","calculateEquilibriumWorker","Comlink","Worker","calculateEquilibrium","context","console","log","query","variables","Array","from","keys","totalConcentrations","_","includes","componentId","total","concentration","aqueousSpecies","constant","coefficients","coefficient","solidsCouldBePresent","partialPressure","componentReplacing","extraSolubilityProductsToCheck","solid","ret","equilibria","getEquilibria","equilibriaSlice","push","meta","arg","findLastIndex","equilibrium","data","errors","$set","rejected","error","FreeQL","React","lazy","App","footerHeight","Navbar","expand","bg","variant","Brand","href","src","alt","Collapse","Nav","style","Link","target","fallback","headerHeight","Container","Row","Col","Boolean","location","hostname","reducer","combineReducers","loading","store","configureStore","middleware","getDefaultMiddleware","serializableCheck","immutableCheck","rootEl","document","getElementById","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.3e933a23.chunk.js","sourcesContent":["import is_number from 'is-number';\r\nimport { createSelector } from 'reselect';\r\nimport { hPlusOptions } from './componentsSlice';\r\n\r\nconst getComponentsPresent = (state) => state.components.present;\r\nconst getComponentDB = (state) => state.components.componentDB;\r\nconst getHPlusOption = (state) => state.components.hPlusOption;\r\nconst getWaterValue = (state) => getComponentDB(state).waterValue;\r\n\r\nconst getComponentsConc = createSelector(\r\n  [\r\n    (state) => state.components.conc,\r\n    getComponentDB,\r\n    getHPlusOption,\r\n  ],\r\n  (concs, componentDB, hPlusOption) => {\r\n    if(hPlusOption===hPlusOptions.ph){\r\n      return concs.update(componentDB.hPlusValue, ph => is_number(ph) ? Math.pow(10, -ph) : ph);\r\n    } else {\r\n      return concs;\r\n    }\r\n  }\r\n);\r\n\r\nconst getComponentsAtEquilibrium = createSelector(\r\n  [\r\n    (state) => state.components.atEquilibrium,\r\n    getComponentDB,\r\n    getHPlusOption,\r\n  ],\r\n  (equilComponents, componentDB, hPlusOption) => {\r\n    if(hPlusOption===hPlusOptions.ph) {\r\n      return equilComponents.add(componentDB.hPlusValue);\r\n    } else {\r\n      return equilComponents;\r\n    }\r\n  }\r\n);\r\n\r\nconst isComponentAtEquilibrium=createSelector(\r\n  [\r\n    getComponentsAtEquilibrium,\r\n    (state, {component}) => component,\r\n  ],\r\n  (componentsAtEquilibrium, component) => componentsAtEquilibrium.has(component)\r\n);\r\n\r\nexport { getComponentsPresent, getComponentsConc, getComponentsAtEquilibrium, getWaterValue, isComponentAtEquilibrium, getComponentDB, getHPlusOption }\r\n","import * as Immutable from 'immutable';\r\nimport is_number from 'is-number';\r\n\r\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport {fetchComponentDB} from \"../fetchDBs.js\";\r\nimport { removeComponentsWithSpecies } from '../common/actions.js';\r\n\r\nconst addComponentsReducer=(state, components) => {\r\n  state.present=state.present.union(components);\r\n  state.conc=state.conc.withMutations(conc => {\r\n    for(const component of components){\r\n      conc.set(component,null);\r\n    }\r\n  })\r\n};\r\n\r\nconst removeComponentsReducer=(state, components) => {\r\n  state.present=state.present.subtract(components);\r\n  state.conc=state.conc.deleteAll(components);\r\n\r\n};\r\nconst setComponentConcReducer=(state, component, value) => {\r\n  const numberValue = is_number(value) ? Number(value) : null;\r\n  state.conc=state.conc.set(component, numberValue);\r\n};\r\n\r\nconst putComponentsAtEquilibriumReducer=(state, component) => {\r\n  state.atEquilibrium=state.atEquilibrium.union(component);\r\n};\r\nconst removeComponentsFromEquilibriumReducer=(state, component) => {\r\n  state.atEquilibrium=state.atEquilibrium.subtract(component);\r\n};\r\n\r\nconst hPlusOptions={\r\n  totalH: { value: \"unique_1\", label: 'totalH' },\r\n  ph: { value: \"unique_2\", label: 'pH' },\r\n  //alk: { value: \"unique_3\", label: 'Alkalinity^1' },\r\n  //otherAlk: { value: \"unique_4\", label: 'Other Alkalinity' },\r\n};\r\n\r\nconst hPlusOptionChangedReducer=(state, val) => {\r\n  state.hPlusOption=val;\r\n};\r\n\r\nconst getNewComponentDB=createAsyncThunk(\r\n  \"getNewComponentDB\",\r\n  async (args, thunkAPI) => {\r\n    return fetchComponentDB(args);\r\n  }\r\n);\r\n\r\nconst initialState = {\r\n  present: Immutable.OrderedSet(),\r\n  conc: Immutable.Map(),\r\n  atEquilibrium: Immutable.Set(),\r\n  componentDB: {\r\n    components: null,\r\n    hPlusValue: null,\r\n    waterValue: null,\r\n  },\r\n  hPlusOption: hPlusOptions.totalH, \r\n};\r\n\r\nconst componentsSlice= createSlice({\r\n  name: \"components\",\r\n  initialState,\r\n  reducers: {\r\n    addComponents: (state, action) => {\r\n      addComponentsReducer(state, action.payload)\r\n    },\r\n    componentValueChanged: (state, action) => {\r\n      setComponentConcReducer(state, action.payload.component, action.payload.value)\r\n    },\r\n    putComponentsAtEquilibrium: (state, action) => {\r\n      putComponentsAtEquilibriumReducer(state, action.payload)\r\n    },\r\n    removeComponentsFromEquilibrium: (state, action) => {\r\n      removeComponentsFromEquilibriumReducer(state, action.payload)\r\n    },\r\n    hPlusOptionChanged: (state, action) => {\r\n      hPlusOptionChangedReducer(state, action.payload)\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getNewComponentDB.pending, (state, action) => {\r\n        Object.assign(state, initialState);\r\n      })\r\n      .addCase(getNewComponentDB.fulfilled, (state, action) => {\r\n        const db = action.payload;\r\n        state.componentDB=db;\r\n        addComponentsReducer(state, [db.hPlusValue]);\r\n      })\r\n      .addCase(removeComponentsWithSpecies, (state, action) => {\r\n        removeComponentsReducer(state, action.payload.components)\r\n      })\r\n  }\r\n});\r\n\r\nexport const { addComponents, componentValueChanged, putComponentsAtEquilibrium, removeComponentsFromEquilibrium, hPlusOptionChanged } = componentsSlice.actions;\r\nexport { getNewComponentDB };\r\nexport { hPlusOptions };\r\nexport default componentsSlice.reducer;\r\n","import * as Immutable from \"immutable\";\r\nimport { createSelectorCreator, defaultMemoize } from \"reselect\";\r\nimport { shallowEqualArrays } from \"shallow-equal\";\r\n\r\nconst diffMemoize=(fn, initial, addReducer, removeReducer) => {\r\n  let oldArgs=null;\r\n  let oldFirstArg=null;\r\n  let reduceResult=null;\r\n  return (firstArg, ...args) => {\r\n    if(!shallowEqualArrays(oldArgs, args)){\r\n      oldFirstArg=Immutable.Set();\r\n      reduceResult=initial;\r\n      oldArgs=args;\r\n    }\r\n    const added=firstArg.subtract(oldFirstArg);\r\n    const removed=oldFirstArg.subtract(firstArg);\r\n    if(added.size){\r\n      reduceResult=added.reduce((prev, curr) => addReducer(prev, curr, ...args), reduceResult);\r\n    }\r\n    if(removed.size){\r\n      reduceResult=removed.reduce((prev, curr) => removeReducer(prev, curr, ...args), reduceResult);\r\n    }\r\n    oldFirstArg=firstArg;\r\n    return fn(reduceResult, ...args);\r\n  }\r\n}\r\n\r\nconst my_createSelectorCreator = (memoize, ...memoizeOptions) => {\r\n  return createSelectorCreator((fn, mapmem) => {\r\n    if(mapmem===true){\r\n      return memoize(fn, ...memoizeOptions);\r\n    } else {\r\n      return defaultMemoize(fn);\r\n    }\r\n  }, true);\r\n}\r\n\r\nconst createDiffSelector=(args, initial, addFunc, removeFunc, finalFunc) => {\r\n  return my_createSelectorCreator(diffMemoize, initial, addFunc, removeFunc)(args, finalFunc);\r\n}\r\nexport {createDiffSelector};","import * as Immutable from 'immutable';\r\n\r\nimport { getComponentsPresent, getWaterValue } from '../components/componentsSelectors.js';\r\nimport { createSelector, createStructuredSelector } from 'reselect';\r\nimport { createDiffSelector } from '../../utils/createDiffSelector.js';\r\nimport memoize from 'fast-memoize';\r\n\r\nconst indexSort=(db) => (specie) => db.get(specie).index;\r\n\r\nconst getSpeciesDB=(state) => state.species.speciesDB;\r\n\r\nconst getComponentToSpeciesOfTypeFactory=memoize((type) => createSelector(\r\n  [getSpeciesDB],\r\n  (speciesDB) => {\r\n    return Immutable.Map().withMutations(componentToSpecies => {\r\n      for(const [speciesId, {components}] of speciesDB[type]) {\r\n        for(const [component] of components) {\r\n          componentToSpecies.update(component, (oldSet=Immutable.Set()) => oldSet.add(speciesId));\r\n        }\r\n      }\r\n    });\r\n  }\r\n))\r\n\r\n\r\nconst getSpeciesOfTypeFactory=memoize((type) => (state) => state.species.speciesDB[type]);\r\n\r\nconst getSpeciesCouldBePresentOfTypeFactory=memoize((type) => createDiffSelector(\r\n  [getComponentsPresent, getSpeciesOfTypeFactory(type), getComponentToSpeciesOfTypeFactory(type), getWaterValue], //deps\r\n  {speciesOccurences: Immutable.Map(), speciesCouldBePresent: Immutable.OrderedSet()}, //initial of reducer\r\n  ({speciesOccurences, speciesCouldBePresent}, componentToAdd, speciesOfType, componentToSpeciesOfType, waterValue) => {  //addReducer\r\n    let newSpeciesOccurences;\r\n    let newSpeciesCouldBePresent;\r\n    newSpeciesOccurences=speciesOccurences.withMutations(speciesOccurences => {\r\n      newSpeciesCouldBePresent=speciesCouldBePresent.withMutations(speciesCouldBePresent => {\r\n        for(const specie of componentToSpeciesOfType.get(componentToAdd) ?? []) {\r\n          speciesOccurences.update(specie, (num=0)=>num+1);\r\n          if(speciesOfType.get(specie).components.delete(waterValue).size===speciesOccurences.get(specie)){\r\n            speciesCouldBePresent.add(specie);\r\n          }\r\n        }\r\n      })\r\n    })\r\n    return {speciesOccurences: newSpeciesOccurences, speciesCouldBePresent: newSpeciesCouldBePresent};\r\n  },\r\n  ({speciesOccurences, speciesCouldBePresent}, componentToRemove, speciesOfType, componentToSpeciesOfType) => {  //removeReducer\r\n    let newSpeciesOccurences;\r\n    let newSpeciesCouldBePresent;\r\n    newSpeciesOccurences=speciesOccurences.withMutations(speciesOccurences => {\r\n      newSpeciesCouldBePresent=speciesCouldBePresent.withMutations(speciesCouldBePresent => {\r\n        for(const specie of componentToSpeciesOfType.get(componentToRemove) ?? []) {\r\n          speciesOccurences.update(specie, (num=0)=>num-1);\r\n          speciesCouldBePresent.remove(specie);\r\n        }\r\n      })\r\n    })\r\n    return {speciesOccurences: newSpeciesOccurences, speciesCouldBePresent: newSpeciesCouldBePresent};\r\n  },\r\n  ({speciesCouldBePresent}, speciesOfType) => speciesCouldBePresent.sortBy(indexSort(speciesOfType)) //final function\r\n));\r\n\r\nconst getSpeciesPresentOfTypeFactory=memoize((type) => createSelector(\r\n  [\r\n    (state) => state.species.speciesEnabled[type],\r\n    getSpeciesCouldBePresentOfTypeFactory(type),\r\n  ],\r\n  (speciesEnabled, speciesCouldBePresent) => {\r\n    return speciesCouldBePresent.filter(specie => speciesEnabled.map.get(specie) ?? speciesEnabled.default);\r\n  }\r\n));\r\n\r\nconst speciesFactoryFactory=(typeFactory) => createStructuredSelector({\r\n  aqs: typeFactory(\"aqs\"),\r\n  solids: typeFactory(\"solids\"),\r\n  gases: typeFactory(\"gases\"),\r\n});\r\n\r\nconst getSpeciesCouldBePresent=speciesFactoryFactory(getSpeciesCouldBePresentOfTypeFactory);\r\nconst getComponentToSpecies=speciesFactoryFactory(getComponentToSpeciesOfTypeFactory);\r\nconst getSpeciesPresent=speciesFactoryFactory(getSpeciesPresentOfTypeFactory);\r\n\r\nconst getLogKChanges=(state) => state.species.logKChanges;\r\nconst getLogKChange=(state, {type, specie}) => state.species.logKChanges[type].get(specie);\r\n\r\nconst getIfSpecieEnabled=(state, {type, specie}) => state.species.speciesEnabled[type].map.get(specie) ?? state.species.speciesEnabled[type].default;\r\n\r\n\r\nexport { getSpeciesCouldBePresent, getSpeciesPresent, getSpeciesDB, getLogKChanges, getIfSpecieEnabled, getLogKChange, getComponentToSpecies, indexSort };\r\n","import * as Immutable from 'immutable';\r\n\r\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { fetchSpeciesDB } from '../fetchDBs.js';\r\n\r\nimport { removeComponentsWithSpecies } from '../common/actions.js';\r\n\r\n\r\nconst enableSpeciesOfTypeReducer=(state, type, species) => {\r\n  if(!species){\r\n    return;\r\n  }\r\n  state.speciesEnabled[type].map=state.speciesEnabled[type].map.withMutations(speciesEnabled => {\r\n    for(const specie of species){\r\n      speciesEnabled.set(specie, true);\r\n    }\r\n  });\r\n}\r\nconst disableSpeciesOfTypeReducer=(state, type, species) => {\r\n  if(!species){\r\n    return;\r\n  }\r\n  state.speciesEnabled[type].map=state.speciesEnabled[type].map.withMutations(speciesEnabled => {\r\n    for(const specie of species){\r\n      speciesEnabled.set(specie, false);\r\n    }\r\n  });\r\n}\r\n\r\nconst addLogKChangeReducer=(state, type, specie, value) => {\r\n  state.logKChanges[type]=state.logKChanges[type].set(specie, value);\r\n}\r\n\r\nconst removeLogKChangeReducer=(state, type, specie) => {\r\n  state.logKChanges[type]=state.logKChanges[type].delete(specie);\r\n}\r\n\r\n\r\nconst getNewSpeciesDB=createAsyncThunk(\r\n  \"getNewSpeciesDB\",\r\n  async (args, thunkAPI) => {\r\n    return fetchSpeciesDB(args);\r\n  }\r\n);\r\n\r\nconst initialState={\r\n  speciesEnabled: {\r\n    aqs: {map: Immutable.Map(), default: true},\r\n    solids: {map: Immutable.Map(), default: false},\r\n    gases: {map: Immutable.Map(), default: false},\r\n  },\r\n  logKChanges: {\r\n    aqs: Immutable.Map(),\r\n    solids: Immutable.Map(),\r\n    gases: Immutable.Map(),\r\n  },\r\n  speciesDB: {\r\n    aqs: null,\r\n    solids: null,\r\n    gases: null,\r\n  }\r\n};\r\n\r\n\r\nconst speciesSlice=createSlice({\r\n  name: \"species\",\r\n  initialState,\r\n  reducers: {\r\n    enableSpecies: (state, action) => {\r\n      enableSpeciesOfTypeReducer(state, \"aqs\", action.payload.aqs);\r\n      enableSpeciesOfTypeReducer(state, \"solids\", action.payload.solids);\r\n      enableSpeciesOfTypeReducer(state, \"gases\", action.payload.gases);\r\n    },\r\n    disableSpecies: (state, action) => {\r\n      disableSpeciesOfTypeReducer(state, \"aqs\", action.payload.aqs);\r\n      disableSpeciesOfTypeReducer(state, \"solids\", action.payload.solids);\r\n      disableSpeciesOfTypeReducer(state, \"gases\", action.payload.gases);\r\n    },\r\n    addLogKChange: (state, action) => {\r\n      addLogKChangeReducer(state, action.payload.type, action.payload.specie, action.payload.value);\r\n    },\r\n    removeLogKChange: (state, action) => {\r\n      removeLogKChangeReducer(state, action.payload.type, action.payload.specie);\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n    .addCase(getNewSpeciesDB.pending, (state, action) => {\r\n      Object.assign(state, initialState);\r\n    })\r\n    .addCase(getNewSpeciesDB.fulfilled, (state, action) => {\r\n      const db = action.payload;\r\n      state.speciesDB = db;\r\n    })\r\n    .addCase(removeComponentsWithSpecies, (state, action) => {\r\n      state.speciesEnabled.aqs.map=state.speciesEnabled.aqs.map.deleteAll(action.payload.species.aqs);\r\n      state.speciesEnabled.solids.map=state.speciesEnabled.solids.map.deleteAll(action.payload.species.solids);\r\n      state.speciesEnabled.gases.map=state.speciesEnabled.gases.map.deleteAll(action.payload.species.gases);\r\n    })\r\n  },\r\n});\r\n\r\n\r\nexport const { enableSpecies, disableSpecies, addLogKChange, removeLogKChange } = speciesSlice.actions;\r\nexport { getNewSpeciesDB };\r\nexport default speciesSlice.reducer;","import * as Immutable from 'immutable';\r\n\r\nimport { createAction } from \"@reduxjs/toolkit\";\r\nimport { getComponentToSpecies } from \"../species/speciesSelectors\";\r\n\r\nconst removeComponentsWithSpecies=createAction(\"removeComponentsWithSpecies\");\r\n\r\nconst removeComponents=(components) => {\r\n  return (dispatch, getState) => {\r\n    const componentToSpecies=getComponentToSpecies(getState());\r\n    const species={aqs: Immutable.Set(), solids: Immutable.Set(), gases: Immutable.Set()};\r\n    for(const component of components) {\r\n      species.aqs=species.aqs.union(componentToSpecies.aqs.get(component) ?? []);\r\n      species.solids=species.solids.union(componentToSpecies.solids.get(component) ?? []);\r\n      species.gases=species.gases.union(componentToSpecies.gases.get(component) ?? []);\r\n    }\r\n    dispatch(removeComponentsWithSpecies({components, species}));\r\n  }\r\n}\r\n\r\nexport {removeComponentsWithSpecies, removeComponents}","import * as Immutable from 'immutable';\r\nimport is_number from 'is-number';\r\n\r\nimport { createSlice, createSelector } from '@reduxjs/toolkit'\r\nimport { disableSpecies } from '../speciesSlice';\r\nimport { removeComponentsWithSpecies } from '../../common/actions';\r\n\r\nconst setGasPartialPressureReducer=(state, gas, value) => {\r\n  state.partialPressures=state.partialPressures.set(gas,  is_number(value) ? Number(value) : null);\r\n}\r\n\r\nconst setGasReplacementReducer=(state, gas, component) => {\r\n  state.gasReplacements=state.gasReplacements.set(gas, component);\r\n}\r\n\r\nconst deleteGasReducer=(state, gases) => {\r\n  state.gasReplacements=state.gasReplacements.deleteAll(gases);\r\n  state.partialPressures=state.partialPressures.deleteAll(gases);\r\n}\r\n\r\nconst initialState={\r\n  partialPressures: Immutable.Map(),\r\n  gasReplacements: Immutable.Map(),\r\n}\r\n\r\nconst getPartialPressures=(state) => state.gasInput.partialPressures;\r\nconst getGasReplacements=(state) => state.gasInput.gasReplacements;\r\n\r\nconst getComponentToGases=createSelector(\r\n  [getGasReplacements],\r\n  (gasReplacements) => gasReplacements.reduce(\r\n    (componentToSpecies, component, specie) => componentToSpecies.update(component, (species=Immutable.Set()) => species.add(specie)), Immutable.Map()\r\n  )\r\n)\r\nconst getErroredGases=createSelector(\r\n  [getComponentToGases],\r\n  (componentToGases) => componentToGases.filter(species => species.size>1).reduce(\r\n    (erroredSpecies, species) => erroredSpecies.union(species), Immutable.Set()\r\n  )\r\n);\r\n\r\nconst gasInputSlice = createSlice({\r\n  name: \"gasInput\",\r\n  initialState,\r\n  reducers: {\r\n    setGasPartialPressure: (state, action) => {\r\n      setGasPartialPressureReducer(state, action.payload.gas, action.payload.value)\r\n    },\r\n    setGasReplacement: (state, action) => {\r\n      setGasReplacementReducer(state, action.payload.gas, action.payload.component)\r\n    },\r\n  },\r\n  extraReducers: (builder) =>{\r\n    builder\r\n    .addCase(removeComponentsWithSpecies, (state, action) => {\r\n      deleteGasReducer(state, action.payload.species.gases)\r\n    })\r\n    .addCase(disableSpecies, (state, action) => {\r\n      deleteGasReducer(state, action.payload.gases)\r\n    })\r\n  }\r\n});\r\n\r\nexport const { setGasPartialPressure, setGasReplacement } = gasInputSlice.actions;\r\n\r\nexport { getPartialPressures, getComponentToGases, getGasReplacements, getErroredGases }\r\n\r\nexport default gasInputSlice.reducer;","import { createSlice } from '@reduxjs/toolkit'\r\nimport { getNewComponentDB } from '../components/componentsSlice.js';\r\nimport { getNewSpeciesDB } from '../species/speciesSlice.js';\r\n\r\nconst pending=\"pending\";\r\nconst fulfilled=\"fulfilled\";\r\nconst rejected=\"rejected\";\r\n\r\nconst isAsyncAction=({type})=> {\r\n  return type.endsWith(\"/pending\") ||  type.endsWith(\"/fulfilled\")|| type.endsWith(\"/rejected\");\r\n}\r\n\r\nconst getNameFromAsyncThunk=(thunk) => thunk.pending.type.substring(0, thunk.pending.type.lastIndexOf(\"/\"));\r\nconst actionToName={\r\n  [getNameFromAsyncThunk(getNewComponentDB)] : \"componentDB\",\r\n  [getNameFromAsyncThunk(getNewSpeciesDB)] : \"speciesDB\",\r\n}\r\n\r\nconst loadingSlice=createSlice({\r\n  name: \"loading\",\r\n  initialState: {\r\n    componentDB: pending,\r\n    speciesDB: pending,\r\n  },\r\n  extraReducers: builder => {\r\n    builder\r\n      .addMatcher(isAsyncAction, (state, {type})=>{\r\n        state[actionToName[type.substring(0, type.lastIndexOf(\"/\"))]]=type.substring(type.lastIndexOf(\"/\")+1);\r\n      })\r\n  }\r\n});\r\nexport {pending, fulfilled, rejected};\r\n\r\nexport default loadingSlice.reducer;","const getData=(item, options, property) => {\r\n  return item[options[property].row][options[property].column];\r\n}\r\nconst getDataWithStride=(item, options, property, i) => {\r\n  return item[options[property].row][options[property].column+i*options[property].stride];\r\n}\r\n\r\nfunction parseCSVWithPartial(str) {\r\n  let arr = [];\r\n  let quote = false;\r\n\r\n  let lastLineStart=0;\r\n  let lastMatchEnd=0;\r\n  let row=0;\r\n  let col=0;\r\n  for(const match of str.matchAll(/(\"\")|(\")|(,)|(?:(\\r\\n)|(\\n)|(\\r))($)?|$/g)){\r\n    arr[row] = arr[row] || [];\r\n    arr[row][col] = arr[row][col] || '';\r\n    if(match[7]){\r\n      break;\r\n    }\r\n    arr[row][col]+=str.substring(lastMatchEnd, match.index);\r\n    if(match[1]){\r\n      if(quote){\r\n        arr[row][col]+='\"';\r\n      }\r\n      lastMatchEnd=match.index+2;\r\n    } else if(match[2]){\r\n      quote=!quote;\r\n      lastMatchEnd=match.index+1;\r\n    } else if(match[3]){\r\n      ++col;\r\n      lastMatchEnd=match.index+1;\r\n    } else if(match[4]) {\r\n      ++row;\r\n      col=0;\r\n      lastMatchEnd=match.index+2;\r\n      lastLineStart=lastMatchEnd;\r\n    } else if(match[5] || match[6]) {\r\n      ++row;\r\n      col=0;\r\n      lastMatchEnd=match.index+1;\r\n      lastLineStart=lastMatchEnd;\r\n    }\r\n  }\r\n  return [arr, str.substring(lastLineStart)];\r\n}\r\n\r\nconst fetchCSV=(url) => {\r\n  return fetch(url)\r\n    .then(\r\n      response => {\r\n        const reader=response.body.getReader();\r\n        let lastLine=\"\";\r\n        let csvBuilt=[];\r\n        const chunkParser=(chunk, partial) => {\r\n          const decodedChunk=lastLine+new TextDecoder(\"utf-8\").decode(chunk);\r\n          const [parsed, thisLastLine] = parseCSVWithPartial(decodedChunk);\r\n          if(!partial) {\r\n            lastLine=thisLastLine;\r\n            return parsed.slice(0, parsed.length-1);\r\n          } else {\r\n            return parsed;\r\n          }\r\n        }\r\n        return new Promise(resolve => {\r\n          pump();\r\n          function pump() {\r\n            return reader.read().then(res => {\r\n              if(res.done) {\r\n                csvBuilt=csvBuilt.concat(chunkParser(res.value, true));\r\n                resolve(csvBuilt);\r\n                return;\r\n              }\r\n              csvBuilt=csvBuilt.concat(chunkParser(res.value));\r\n              pump();\r\n            })\r\n          }\r\n        })\r\n      }\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport {getData, getDataWithStride, fetchCSV};","import { fetchCSV, getData, getDataWithStride } from '../utils/readCSV.js';\r\nimport chunk from \"chunk\";\r\n\r\nimport * as Immutable from 'immutable';\r\n\r\n\r\nconst fetchSpeciesDB=({url, options, type, callback}) => {\r\n  if(type===\"link\") {\r\n    return Promise.all([url, ...options.labels.urls].map(url => fetchCSV(url))).then(tables => {\r\n      const [mainTable, ...labelTables]=tables;\r\n      const labelList=labelTables.map(labelTable => chunk(labelTable, options.linesPerItem)).map(chunkedLabelTable => chunkedLabelTable.map(labelTable => getData(labelTable, options.labels, \"id\")));\r\n\r\n      const labelMap=Immutable.Map().withMutations((labelMap) => {\r\n        for(const [index, labelTable] of labelList.entries()) {\r\n          for(const specie of labelTable){\r\n            labelMap.set(specie, options.labels.labelMap[index]);\r\n          }\r\n        };\r\n      });\r\n      \r\n      const chunkedMainTable=chunk(mainTable, options.linesPerItem).filter(chunk => Number(chunk[0][0]));\r\n      const db={\r\n        aqs: null,\r\n        solids: null,\r\n        gases: null,\r\n      }\r\n      db.aqs=Immutable.Map().withMutations(aqSpecies => {  \r\n        db.solids=Immutable.Map().withMutations(solidSpecies => {\r\n          db.gases=Immutable.Map().withMutations(gasSpecies => {\r\n            const db={aqs: aqSpecies, solids: solidSpecies, gases: gasSpecies};\r\n            for(const item of chunkedMainTable){\r\n              const id=getData(item, options, \"id\");\r\n              const dbAddingTo=db[labelMap.get(id) ?? \"aqs\"]\r\n              dbAddingTo.set(id, \r\n                {\r\n                  name: getData(item, options, \"name\"),\r\n                  charge: Number(getData(item, options, \"charge\")),\r\n                  logK: Number(getData(item, options, \"logK\")),\r\n                  label: labelMap.get(id) ?? 0,\r\n                  index: dbAddingTo.size,\r\n                  components: Immutable.OrderedMap().withMutations((components) => {\r\n                    for(let i=0; i<getData(item, options, \"numComponents\"); ++i){\r\n                      const component=getDataWithStride(item, options, \"components\", i);\r\n                      const componentAmt=Number(getDataWithStride(item, options, \"componentAmts\", i));\r\n                      components.set(component, componentAmt);\r\n                    }\r\n                  }),\r\n                }\r\n              )\r\n            }\r\n          });\r\n        });\r\n      });\r\n      \r\n      return db;\r\n    })\r\n  }\r\n}\r\n\r\nconst fetchComponentDB=({url, options, type, callback}) => {\r\n  if(type===\"link\") {\r\n    return fetchCSV(url).then(result => chunk(result, options.linesPerItem))\r\n    .then(chunks => \r\n      ({\r\n        hPlusValue: options.hPlusValue, \r\n        waterValue: options.waterValue,\r\n        components: Immutable.OrderedMap(chunks.filter(item => getData(item, options, \"id\")).map(item => [\r\n          getData(item, options, \"id\"),\r\n          {\r\n            name: getData(item, options, \"name\"), \r\n            charge: Number(getData(item, options, \"charge\")),\r\n          }\r\n        ]))\r\n      })\r\n    )\r\n    \r\n  }\r\n}\r\n\r\nconst componentDBDefaultParams={\r\n  url: process.env.PUBLIC_URL+\"/assets/defaultdb/comp.vdb\", \r\n  type: \"link\",\r\n  options: {\r\n    linesPerItem: 1,\r\n    id: {row: 0, column: 0},\r\n    name: {row: 0, column: 1},\r\n    charge: {row: 0, column: 2},\r\n    hPlusValue: \"330\",\r\n    waterValue: \"2\",\r\n  }, \r\n};\r\n\r\nconst speciesDBDefaultParams={\r\n  url: process.env.PUBLIC_URL+\"/assets/defaultdb/thermo.vdb\", \r\n  type: \"link\",\r\n  options: {\r\n    linesPerItem: 3,\r\n    id: {row: 0, column: 0},\r\n    name: {row: 0, column: 1},\r\n    charge: {row: 0, column: 6},\r\n    logK: {row: 0, column: 3},\r\n    numComponents: {row: 0, column: 10},\r\n    components: {row: 1, column: 1, stride: 2},\r\n    componentAmts: {row: 1, column: 0, stride: 2},\r\n    labels: {\r\n      urls: [process.env.PUBLIC_URL+\"/assets/defaultdb/type6.vdb\", process.env.PUBLIC_URL+\"/assets/defaultdb/gases.vdb\"],\r\n      linesPerId: 3,\r\n      id: {row: 0, column: 0},\r\n      labelMap: [\"solids\", \"gases\"]\r\n    }\r\n  }, \r\n};\r\n\r\nexport {fetchSpeciesDB, fetchComponentDB, speciesDBDefaultParams, componentDBDefaultParams};","import React from 'react';\r\n\r\nconst CenteringDiv=(props) => {\r\n  return (\r\n    <div className={\"flex-\"+(props.start ? props.start+\"-\" : \"\")+\"grow-1 \"+(props.end ? \"flex-\"+props.end+\"-grow-0\" : \"\")}>\r\n      {props.children}\r\n    </div>\r\n  );\r\n}\r\nexport default CenteringDiv;","import { useState, useLayoutEffect } from \"react\";\r\n\r\n\r\nconst useWindowSize=() => {\r\n  // Initialize state with undefined width/height so server and client renders match\r\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\r\n  const [windowSize, setWindowSize] = useState({\r\n    width: window.innerWidth,\r\n    height: window.innerHeight,\r\n  });\r\n\r\n  useLayoutEffect(() => {\r\n    // Handler to call on window resize\r\n     const handleResize=()=>{\r\n      // Set window width/height to state\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      });\r\n    }\r\n    \r\n    // Add event listener\r\n    window.addEventListener(\"resize\", handleResize);\r\n    \r\n    // Remove event listener on cleanup\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []); // Empty array ensures that effect is only run on mount\r\n\r\n  return windowSize;\r\n}\r\n\r\nexport default useWindowSize;","import * as Immutable from 'immutable';\r\nimport { createAsyncThunk, createSelector, createSlice } from \"@reduxjs/toolkit\";\r\n\r\n//eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport ConcentrationCalculator from 'worker-loader!./CalculateEquilibriumWorker.js'\r\nimport { getComponentDB, getComponentsAtEquilibrium, getComponentsConc } from '../components/componentsSelectors';\r\nimport { getLogKChanges, getSpeciesCouldBePresent, getSpeciesDB, getSpeciesPresent } from '../species/speciesSelectors';\r\n\r\nimport * as Comlink from \"comlink\";\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { pending } from '../loading/loadingSlice';\r\nimport update from \"immutability-helper\";\r\nimport { getGasReplacements, getPartialPressures } from '../species/gases/gasInputSlice';\r\n\r\n\r\nconst getCurrentCalculationArguments=createStructuredSelector(\r\n  {\r\n    componentsConc: getComponentsConc,\r\n    componentsAtEquilibrium: getComponentsAtEquilibrium,\r\n    speciesPresent: getSpeciesPresent,\r\n    speciesCouldBePresent: getSpeciesCouldBePresent,\r\n    logKChanges: getLogKChanges,\r\n    speciesDB: getSpeciesDB,\r\n    componentDB: getComponentDB,\r\n    partialPressures: getPartialPressures,\r\n    gasReplacements: getGasReplacements,\r\n  }\r\n)\r\n\r\nconst calculateEquilibriumQuery=`\r\nquery getResults($components: [ID!]!, $totalConcentrations: [TotalConcentrationInput!]!, $componentsAtEquilibrium: [ComponentAtEquilibriumInput!], $aqueousSpecies: [SpecieInput!]!, $solidsCouldBePresent: [SolidCouldBePresentInput!], $solidsAtEquilibrium: [SolidAtEquilibriumInput], $gases: [GasInput!], $extraSolubilityProductsToCheck: [SpecieInput!]){\r\n  equilibrium(components: $components, totalConcentrations: $totalConcentrations, componentsAtEquilibrium: $componentsAtEquilibrium, aqueousSpecies: $aqueousSpecies, solidsCouldBePresent: $solidsCouldBePresent, solidsAtEquilibrium: $solidsAtEquilibrium, gases: $gases){\r\n    species {\r\n      component{\r\n        componentId,\r\n        concentration,\r\n      },\r\n      aqueous{\r\n        id,\r\n        concentration,\r\n      },\r\n      solid{\r\n        present{\r\n          id,\r\n          concentration\r\n        },\r\n        notPresent{\r\n          id,\r\n          solubilityProduct\r\n        }\r\n      }\r\n    },\r\n    totalConcentrations{\r\n      componentId,\r\n      total\r\n    },\r\n    extraSolubilityProducts(species: $extraSolubilityProductsToCheck){\r\n      id,\r\n      solubilityProduct\r\n    }\r\n  }\r\n}\r\n`\r\nconst calculateEquilibriumWorker=Comlink.wrap(new ConcentrationCalculator());\r\n\r\nconst calculateEquilibrium=createAsyncThunk(\r\n  \"calculateEquilibrium\",\r\n  async (context) => {\r\n    const {componentsConc, componentsAtEquilibrium, speciesPresent, speciesCouldBePresent, logKChanges, speciesDB, partialPressures, gasReplacements, componentDB}=context;\r\n    console.log(context);\r\n    const args={\r\n      query: calculateEquilibriumQuery,\r\n      variables: {\r\n        components: Array.from(componentsConc.keys()),\r\n        totalConcentrations: Array.from(componentsConc.filter((_, component) => !componentsAtEquilibrium.has(component) && !gasReplacements.includes(component))).map(([component, conc]) => ({componentId: component, total: conc})),\r\n        componentsAtEquilibrium: Array.from(componentsAtEquilibrium.keys()).map(component => ({componentId: component, concentration: componentsConc.get(component)})),\r\n        aqueousSpecies: Array.from(speciesPresent.aqs).map(specie => ({id: specie, row: {constant: Math.pow(10, logKChanges.aqs.get(specie) ?? speciesDB.aqs.get(specie).logK), coefficients: Array.from(speciesDB.aqs.get(specie).components).map(([component, amt]) => ({componentId: component, coefficient: amt}))}})),\r\n        solidsCouldBePresent: Array.from(speciesPresent.solids).map(specie => ({id: specie, row: {constant: Math.pow(10, logKChanges.solids.get(specie) ?? speciesDB.solids.get(specie).logK), coefficients: Array.from(speciesDB.solids.get(specie).components).map(([component, amt]) => ({componentId: component, coefficient: amt}))}})),\r\n        gases: Array.from(speciesPresent.gases).map(specie => ({id: specie, partialPressure: partialPressures.get(specie), componentReplacing: gasReplacements.get(specie), row: {constant: Math.pow(10, logKChanges.gases.get(specie) ?? speciesDB.gases.get(specie).logK), coefficients: Array.from(speciesDB.gases.get(specie).components).map(([component, amt]) => ({componentId: component, coefficient: amt}))}})),\r\n        extraSolubilityProductsToCheck: Array.from(speciesCouldBePresent.solids.filter(solid => !speciesPresent.solids.has(solid))).map(specie => ({id: specie, row: {constant: Math.pow(10, logKChanges.solids.get(specie) ?? speciesDB.solids.get(specie).logK), coefficients: Array.from(speciesDB.solids.get(specie).components).map(([component, amt]) => ({componentId: component, coefficient: amt}))}})),\r\n      }\r\n    };\r\n    const ret=await calculateEquilibriumWorker(\r\n      args\r\n    );\r\n    return ret;\r\n  }\r\n);\r\n\r\nconst initialState={\r\n  equilibria: Immutable.List(),\r\n}\r\n\r\nconst getEquilibria=state=> state.equilibria.equilibria;\r\n\r\nconst equilibriaSlice=createSlice({\r\n  name: \"equilibria\",\r\n  initialState,\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(calculateEquilibrium.pending, (state, action) => {\r\n        state.equilibria=state.equilibria.push({context: action.meta.arg, result: pending});\r\n      })\r\n      .addCase(calculateEquilibrium.fulfilled, (state, action) => {\r\n        const index=state.equilibria.findLastIndex(equilibrium => equilibrium.context===action.meta.arg);\r\n        console.log(index);\r\n        let result={};\r\n        if(action.payload.data?.equilibrium){\r\n          result.equilibrium=action.payload.data.equilibrium;\r\n        } else if(action.payload.errors){\r\n          result.errors=action.payload.errors\r\n        }\r\n        state.equilibria=state.equilibria.update(index, equilibrium => update(equilibrium, {result: {$set: result}}));\r\n      })\r\n      .addCase(calculateEquilibrium.rejected, (state, action) => {\r\n        const index=state.equilibria.findLastIndex(equilibrium => equilibrium.context===action.meta.arg);\r\n        console.log(index);\r\n        console.log(action.error);\r\n        state.equilibria=state.equilibria.update(index, equilibrium => update(equilibrium, {result: {$set: { errors: [action.error]}}}))\r\n      })\r\n  }\r\n});\r\n\r\nexport {calculateEquilibrium};\r\nexport {getCurrentCalculationArguments, getEquilibria};\r\nexport default equilibriaSlice.reducer;","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"static/js/CalculateEquilibriumWorker.4a2b4452.worker.js\");\n}\n","import React, { Suspense } from 'react';\r\n\r\nimport './App.scss';\r\n\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\n\r\nimport CenteringDiv from './reusable_components/CenteringDiv.js';\r\nimport useWindowSize from './utils/useWindowSize.js';\r\n\r\nconst FreeQL = React.lazy(() => import(\"./FreeQL.js\"));\r\n\r\nfunction App() {\r\n  const windowSize=useWindowSize();\r\n  const headerHeight=56;\r\n  const footerHeight=windowSize.width>=768 ? 120 : 72;\r\n  return (\r\n    <>\r\n      <Navbar expand=\"sm\" bg=\"dark\" variant=\"dark\">\r\n        <CenteringDiv end=\"sm\">\r\n          <Navbar.Brand href=\"/\">\r\n            <img src={process.env.PUBLIC_URL+\"/assets/img/logo.svg\"} width=\"65\" alt=\"FreeQL\"/>\r\n          </Navbar.Brand>\r\n        </CenteringDiv>\r\n        <Navbar.Brand href=\"/\">FreeQL</Navbar.Brand>\r\n        <CenteringDiv end=\"sm\"/>\r\n        <Navbar.Collapse id=\"navbarTogglerDemo02\">\r\n          <Nav className=\"mr-auto\" style={{\"fontSize\": \"1.025rem\"}}>\r\n            <Nav.Link href=\"https://stephmorel8910.gitbook.io/freeql/\" target=\"_blank\">Help</Nav.Link>\r\n            <Nav.Link href=\"https://github.com/SoAsEr/FreeQL/blob/master/README.md\" target=\"_blank\">README</Nav.Link>\r\n            <Nav.Link href=\"https://github.com/SoAsEr/FreeQL/\" target=\"_blank\">Github</Nav.Link>\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Navbar>\r\n      <Suspense fallback={<div style={{\"height\" : \"calc(100vh - \"+(headerHeight+footerHeight)+\"px)\"}}/>}>\r\n        <FreeQL headerHeight={headerHeight} footerHeight={footerHeight}/>\r\n      </Suspense>\r\n      <footer className=\"bg-dark p-4 p-md-5 text-center\">\r\n        <Container>\r\n          <Row>\r\n            <Col>\r\n              <span className=\"text-light\">Created by Stephane Morel</span>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </footer>\r\n    </>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) { \n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport components from \"./features/components/componentsSlice.js\";\r\nimport loading from \"./features/loading/loadingSlice.js\";\r\nimport species from \"./features/species/speciesSlice.js\";\r\nimport gasInput from \"./features/species/gases/gasInputSlice.js\";\r\nimport equilibria from \"./features/equilibria/equilibriaSlice.js\";\r\n\r\nimport { combineReducers, configureStore, getDefaultMiddleware } from '@reduxjs/toolkit'\r\nimport { Provider } from 'react-redux'\r\nimport { StrictMode } from 'react';\r\n\r\nconst reducer=combineReducers({\r\n  components,\r\n  loading,\r\n  species,\r\n  gasInput,\r\n  equilibria,\r\n});\r\nconst store = configureStore({\r\n  reducer,\r\n  middleware: getDefaultMiddleware({\r\n    serializableCheck: false,\r\n    immutableCheck: false,\r\n  }),\r\n});\r\n\r\n/*\r\nReactDOM.render(\r\n  //<React.StrictMode>\r\n    <App />,\r\n  //</React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n*/\r\nconst rootEl = document.getElementById(\"root\");\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <StrictMode>\r\n      <App />\r\n    </StrictMode>\r\n  </Provider>, rootEl\r\n);\r\n//ReactDOM.unstable_createRoot(rootEl).render(<App />);\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\n"],"sourceRoot":""}