{"version":3,"sources":["component_groups/Tableau.js","formatting/FormattedChemicalCompound.js","utils/ConstantValidationTextInput.js"],"names":["LogKEditor","props","logKChanges","setLogKChanges","specie","defaultVal","useState","get","newLogKVal","setNewLogVal","editing","setEditing","editBoxVal","setEditBoxVal","editBoxRef","useRef","showDefault","undefined","useEffect","delete","set","current","focus","submitEditVal","e","preventDefault","is_number","Number","onSubmit","validation","input","match","onChange","target","value","onBlur","Control","ref","style","onKeyDown","keyCode","stopPropagation","className","toFixed","replace","onClick","width","height","viewBox","fill","xmlns","fillRule","d","TableauTable","React","memo","componentsPresent","componentsInputState","speciesHere","speciesDB","componentsDB","windowWidth","setTypedLogKChanges","useCallback","type","newMap","update","$set","topLeftWidth","setTopLeftWidth","topLeftHeight","setTopLeftHeight","logKWidth","setLogKWidth","lg","headerColumn","useMemo","Header","Footer","id","accessor","name","dataColumns","Immutable","waterValue","map","component","components","getIn","logKColumn","logK","bind","columns","unshift","push","data","aqs","species","solids","gases","flatten","tableInstance","useTable","getTableProps","getTableBodyProps","headerGroups","footerGroups","rows","prepareRow","topLeftRef","useResizeObserver","logKRef","autoHide","autoHeight","autoHeightMax","renderTrackHorizontal","finalStyle","$merge","right","bottom","left","borderRadius","marginLeft","marginRight","renderTrackVertical","top","marginTop","striped","bordered","hover","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","row","getRowProps","cells","cell","getCellProps","group","getFooterGroupProps","getFooterProps","FormattedChemicalCompound","regex","Array","from","children","matchAll","chargeValue","groups","ChargeValue1","ChargeValue2","reduce","prev","curr","chargeSign","ChargeSign1","ChargeSign2","terminator","EndMatcher1","EndMatcher2","EndMatcher3","EndMatcher4","key","substring","index","WordMatcher","SubMatcher","ConstantValidationTextInput","child","Children","only","setValue","selection","setSelection","validationMisfired","setValidationMisfire","selectRef","selectionStart","selectionEnd","cloneElement","onSelect","mergeRefs","defaultProps"],"mappings":"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","file":"static/js/15.18e9bc7f.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect, useMemo, useCallback } from 'react';\r\n\r\nimport ConstantValidationTextInput from \"../utils/ConstantValidationTextInput\";\r\nimport FormattedChemicalCompound from \"../formatting/FormattedChemicalCompound\";\r\nimport useResizeObserver from '../utils/useResizeObserver';\r\n\r\n\r\nimport * as Immutable from \"immutable\";\r\nimport update from \"immutability-helper\";\r\n\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\nimport { useTable } from 'react-table';\r\n\r\nimport Form from 'react-bootstrap/Form';\r\nimport Table from 'react-bootstrap/Table';\r\nimport is_number from 'is-number';\r\n\r\nconst LogKEditor=(props) => {\r\n  const { logKChanges, setLogKChanges, specie, defaultVal } = props;\r\n  const [newLogKVal, setNewLogVal] = useState(logKChanges.get(specie));\r\n  const [editing, setEditing] = useState(false);\r\n  const [editBoxVal, setEditBoxVal] = useState(\"\");\r\n  const editBoxRef=useRef(null);\r\n  const showDefault = newLogKVal===undefined;\r\n  useEffect(() => {\r\n    if(showDefault){\r\n      setLogKChanges(logKChanges.delete(specie));\r\n    } else {\r\n      setLogKChanges(logKChanges.set(specie, newLogKVal));\r\n    }\r\n  }, [logKChanges, setLogKChanges, newLogKVal, showDefault, specie]);\r\n  useEffect(() => {\r\n    if(editing){\r\n      editBoxRef.current.focus();\r\n    }\r\n  }, [editing, editBoxRef]);\r\n\r\n  const beginEditVal=(e) => {\r\n    setEditing(true);\r\n  }\r\n  const submitEditVal=(e) => {\r\n    e.preventDefault();\r\n    setEditing(false);\r\n    setEditBoxVal(\"\");\r\n    setNewLogVal(is_number(editBoxVal) ? Number(editBoxVal) : undefined);\r\n  }\r\n  const cancelEditVal=(e) => {\r\n    if(e.keyCode === 27) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      setEditing(false);\r\n      setEditBoxVal(\"\");\r\n    }\r\n  }\r\n  const onChangeEditBox=(e) => {\r\n    setEditBoxVal(e.target.value);\r\n  }\r\n  const resetVal=(e) => {\r\n    setNewLogVal(undefined);\r\n  }\r\n  if(editing){\r\n    return (\r\n      <Form onSubmit={submitEditVal}>\r\n        <ConstantValidationTextInput validation={(input) => input.match(/^-?\\d*\\.?\\d*$/)} onChange={onChangeEditBox} onBlur={submitEditVal}>\r\n          <Form.Control ref={editBoxRef} style={{\"width\": \"80px\"}} onKeyDown={cancelEditVal}/>\r\n        </ConstantValidationTextInput>\r\n      </Form>\r\n    )\r\n  } else if(showDefault) {\r\n    return (\r\n      <span className=\"text-nowrap\">\r\n        {defaultVal.toFixed(3).replace(/\\.000$|0{0,2}$/, \"\")}\r\n        <svg onClick={beginEditVal} className=\"logK-editor\" style={{\"marginTop\": \"-0.2rem\"}} width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path fillRule=\"evenodd\" d=\"M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z\"></path>\r\n          <path fillRule=\"evenodd\" d=\"M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z\"></path>\r\n        </svg>\r\n      </span>\r\n    )\r\n  } else {\r\n    return (\r\n      <span className=\"text-nowrap\">\r\n        {newLogKVal.toFixed(3).replace(/\\.000$|0{0,2}$/, \"\")}\r\n        <svg onClick={resetVal} className=\"logK-reset\" style={{\"marginTop\" : \"-0.12rem\"}} width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path fillRule=\"evenodd\" d=\"M12.83 6.706a5 5 0 0 0-7.103-3.16.5.5 0 1 1-.454-.892A6 6 0 1 1 2.545 5.5a.5.5 0 1 1 .91.417 5 5 0 1 0 9.375.789z\"></path>\r\n          <path fillRule=\"evenodd\" d=\"M7.854.146a.5.5 0 0 0-.708 0l-2.5 2.5a.5.5 0 0 0 0 .708l2.5 2.5a.5.5 0 1 0 .708-.708L5.707 3 7.854.854a.5.5 0 0 0 0-.708z\"></path>\r\n        </svg>\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nconst TableauTable=React.memo((props) => {\r\n  const {componentsPresent, componentsInputState, speciesHere, speciesDB, componentsDB, logKChanges, setLogKChanges, windowWidth}=props;\r\n\r\n  const setTypedLogKChanges=useCallback((type, newMap) => {\r\n    setLogKChanges(update(logKChanges, {[type]: {$set: newMap}}));\r\n  }, [setLogKChanges, logKChanges]);\r\n\r\n  const [topLeftWidth, setTopLeftWidth]=useState(0);\r\n  const [topLeftHeight, setTopLeftHeight]=useState(0);\r\n  const [logKWidth, setLogKWidth]=useState(0);\r\n  const lg=windowWidth>=992;\r\n  const headerColumn=useMemo(() => ({\r\n    Header: \"\",\r\n    Footer: () => (<><span className=\"d-none d-xl-block\">Total Concentration</span><span className=\"d-block d-xl-none\">Total Conc.</span></>),\r\n    id: \"name\",\r\n    accessor: ([specie, {name}]) => (<FormattedChemicalCompound>{name}</FormattedChemicalCompound>),\r\n  }), []);\r\n  const dataColumns=useMemo(() => Immutable.List(componentsPresent.delete(componentsDB().waterValue)).map(component => {\r\n    return {\r\n      Header: () => (<FormattedChemicalCompound>{componentsDB().components.get(component).name}</FormattedChemicalCompound>),\r\n      Footer: componentsInputState.getIn([component, \"equilChecked\"]) ? \"TBC\" : componentsInputState.getIn([component, \"conc\"]), \r\n      id: component,\r\n      accessor: ([specie, {components}]) => { return components.get(component) ?? 0},\r\n    }\r\n  }), [componentsPresent, componentsInputState, componentsDB]);\r\n  const logKColumn=useMemo(() => ({\r\n    Header: \"logK\",\r\n    Footer: \"\",\r\n    id: \"logK\",\r\n    accessor: ([specie, {logK, type, logKChanges}]) => {return <LogKEditor specie={specie} defaultVal={logK} logKChanges={logKChanges} setLogKChanges={setTypedLogKChanges.bind(null, type)}/>},\r\n  }), [setTypedLogKChanges]);\r\n  const columns=useMemo(() => {\r\n    if(lg){\r\n      return dataColumns.unshift(headerColumn).push(logKColumn);\r\n    } else {\r\n      return dataColumns.unshift(logKColumn).unshift(headerColumn);\r\n    }\r\n  }, [headerColumn, dataColumns, logKColumn, lg]);\r\n  const data=useMemo(() => \r\n    Immutable.List([\r\n      Immutable.List(speciesHere().aqs).map(specie => ([specie, {...speciesDB().aqs.species.get(specie), logKChanges: logKChanges.aqs, type: \"aqs\"}])),\r\n      Immutable.List(speciesHere().solids).map(specie => ([specie, {...speciesDB().solids.species.get(specie), logKChanges: logKChanges.solids, type: \"solids\"}])),\r\n      Immutable.List(speciesHere().gases).map(specie => ([specie, {...speciesDB().gases.species.get(specie), logKChanges: logKChanges.gases, type: \"gases\"}])),\r\n    ]).flatten(true)\r\n  , [speciesHere, speciesDB, logKChanges]);\r\n\r\n  const tableInstance = useTable({ columns, data });\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    footerGroups,\r\n    rows,\r\n    prepareRow,\r\n  } = tableInstance;\r\n\r\n  const topLeftRef=useResizeObserver(useCallback(({width, height}) => {\r\n    setTopLeftWidth(width);\r\n    setTopLeftHeight(height);\r\n  }, [setTopLeftHeight]));\r\n  \r\n  const logKRef=useResizeObserver(useCallback(({width}) => {\r\n    setLogKWidth(width);\r\n  }, [setLogKWidth]));\r\n  \r\n  return(\r\n    <Scrollbars \r\n      autoHide\r\n      style={{width: \"100%\"}}\r\n      autoHeight\r\n      autoHeightMax=\"calc(90vh - 63px - 71px - 2rem)\"\r\n      renderTrackHorizontal={props => {\r\n        const finalStyle = update(props.style,{ $merge: {\r\n          right: 2,\r\n          bottom: 2,\r\n          left: 2,\r\n          borderRadius: 3,\r\n          marginLeft: topLeftWidth,\r\n          marginRight: lg ? logKWidth : 0,\r\n        }});\r\n        return <div {...props} style={finalStyle}/>;\r\n        }\r\n      }\r\n      renderTrackVertical={props => {\r\n        const finalStyle = update(props.style,{ $merge: {\r\n          right: 2,\r\n          bottom: 2,\r\n          top: 2,\r\n          borderRadius: 3,\r\n          marginTop: topLeftHeight,\r\n        }});\r\n        return <div {...props} style={finalStyle}/>;\r\n        }\r\n      }\r\n    >\r\n      <Table striped bordered hover {...getTableProps({\r\n        style: {}\r\n      })}>\r\n        <thead>\r\n          {\r\n            headerGroups.map(headerGroup => (\r\n              <tr {...headerGroup.getHeaderGroupProps()}>\r\n                {\r\n                  headerGroup.headers.map(column => {\r\n                    if(!column.Header){\r\n                      return <th {...column.getHeaderProps({className: \"sticky sticky-header-y sticky-header-x-lg bg-white\"})} ref={topLeftRef} />\r\n                    } else if(column.id===\"logK\"){\r\n                      return (\r\n                        <th {...column.getHeaderProps({\r\n                          className: \"vertical-align-middle sticky-header-y sticky-column-lg sticky\",\r\n                        })} ref={logKRef}>\r\n                          {\r\n                            column.render('Header')\r\n                          }\r\n                        </th>\r\n                      )\r\n                    } else {\r\n                      return (\r\n                        <th {...column.getHeaderProps({\r\n                          className: \"vertical-align-middle sticky-header-y sticky\",\r\n                        })}>\r\n                          {\r\n                            column.render('Header')\r\n                          }\r\n                        </th>\r\n                      )\r\n                    }\r\n                  })\r\n                }\r\n              </tr>\r\n            ))\r\n          }\r\n        </thead>\r\n        \r\n        <tbody {...getTableBodyProps()}>\r\n          {\r\n          rows.map(row => {\r\n            prepareRow(row)\r\n            return (\r\n              <tr {...row.getRowProps()}>\r\n                {\r\n                  row.cells.map(cell => {\r\n                    if(cell.column.id===\"name\"){\r\n                      return (\r\n                        <th {...cell.getCellProps({\r\n                          className: \"vertical-align-middle sticky-header-lg sticky\",\r\n                        })}>\r\n                          {\r\n                            cell.render('Cell')\r\n                          }\r\n                        </th>\r\n                      )\r\n                    } else if(cell.column.id===\"logK\"){\r\n                      return (\r\n                        <td {...cell.getCellProps({\r\n                          className: \"vertical-align-middle sticky-column-lg sticky\",\r\n                        })}>\r\n                          {\r\n                            cell.render('Cell')\r\n                          }\r\n                        </td>\r\n                      )\r\n                    } else {\r\n                      return (\r\n                        <td {...cell.getCellProps({\r\n                          className: \"vertical-align-middle\",\r\n                        })}>\r\n                          {\r\n                            cell.render('Cell')\r\n                          }\r\n                        </td>\r\n                      )\r\n                    }\r\n                  })\r\n                }\r\n              </tr>\r\n            )\r\n          })}\r\n        </tbody>\r\n        <tfoot>\r\n          {footerGroups.map(group => (\r\n            <tr {...group.getFooterGroupProps()}>\r\n              {\r\n                group.headers.map(column => {\r\n                  if(column.id===\"name\"){\r\n                    return (\r\n                      <th {...column.getFooterProps({\r\n                        className: \"vertical-align-middle sticky-x-header-lg sticky\",\r\n                      })}>\r\n                        {\r\n                          column.render('Footer')\r\n                        }\r\n                      </th>\r\n                    );\r\n                  } else if(column.id===\"logK\"){\r\n                    return (\r\n                      <th {...column.getFooterProps({\r\n                        className: \"vertical-align-middle crossed-out sticky-column-lg sticky\",\r\n                      })}>\r\n                        {\r\n                          column.render('Footer')\r\n                        }\r\n                      </th>\r\n                    )\r\n                  } else {\r\n                    return (\r\n                      <td {...column.getFooterProps({\r\n                        className: \"vertical-align-middle sticky\",\r\n                      })}>\r\n                        {\r\n                          column.render('Footer')\r\n                        }\r\n                      </td>\r\n                    );\r\n                  }\r\n                  \r\n                })\r\n              }\r\n            </tr>\r\n          ))}\r\n        </tfoot>\r\n      </Table>\r\n    </Scrollbars>\r\n  )\r\n});\r\n\r\nexport default TableauTable;","import React from \"react\";\r\n\r\nconst FormattedChemicalCompound=React.memo((props) => {\r\n  /*\r\n  WordMatcher=(.*?[^0-9\\[\\(])\r\n  SubMatcher=([0-9])\r\n  EndMatcher=([$\\s])\r\n  SupMatcher=([+-])(?:(?:1|([2-9]))|{EndMatcher})\r\n  WholeExp={WordMatcher}(?:{EndMatcher}|{SubMatcher}{SupMatcher}?|{SupMatcher})\r\n  (WordMatcher[0])_(SubMatcher[0])^(SupMatcher[1]SupMatcher[0])EndMatcher[0]\r\n  That would only work with ruby where the capture groups are changed on every recursion\r\n  */\r\n  //https://regex101.com/r/POrbvL/4\r\n  const regex=/(?<WordMatcher>.*?[^0-9[(\\s])(?:(?<EndMatcher1>$|[:.\\s])|(?<Charge1>(?<ChargeSign1>[+-])(?:(?:1|(?<ChargeValue1>[2-9]))|(?<EndMatcher2>$|[:.\\s])))|(?<SubMatcher>[0-9]+)(?<Charge2>(?<ChargeSign2>[+-])(?:(?:1|(?<ChargeValue2>[2-9]))|(?<EndMatcher3>$|[:.\\s])))?)(?<EndMatcher4>$|[:.\\s])?/g;\r\n  //$<WordMatcher>_($<SubMatcher>)^($<ChargeValue1>$<ChargeValue2>$<ChargeSign1>$<ChargeSign2>)$<EndMatcher1>$<EndMatcher2>$<EndMatcher3>\r\n  return(\r\n    <div {...props}>\r\n        {Array.from(props.children.matchAll(regex)).map((match) => {\r\n          const chargeValue=[match.groups.ChargeValue1, match.groups.ChargeValue2].reduce((prev, curr) => curr ? curr : prev, \"\");\r\n          const chargeSign=[match.groups.ChargeSign1, match.groups.ChargeSign2].reduce((prev, curr) => curr ? curr : prev, \"\");\r\n          const terminator=[match.groups.EndMatcher1, match.groups.EndMatcher2, match.groups.EndMatcher3, match.groups.EndMatcher4].reduce((prev, curr) => curr ? curr : prev, \"\");\r\n          return (\r\n            <span key={props.children.substring(0, match.index)}>\r\n              {match.groups.WordMatcher}<sub>{match.groups.SubMatcher}</sub><sup>{chargeValue}{chargeSign}</sup>{terminator}\r\n            </span>\r\n          );\r\n        })\r\n        }\r\n    </div>\r\n  );\r\n});\r\nexport default FormattedChemicalCompound;","import React, { useState, useRef, useEffect } from 'react';\r\nimport { mergeRefs } from './ref-utils';\r\n\r\nconst ConstantValidationTextInput=React.memo((props) => {\r\n  const child=React.Children.only(props.children);\r\n  const [value, setValue]=useState(\"\");\r\n  const [selection, setSelection]=useState([0,0]);\r\n  const [validationMisfired, setValidationMisfire]=useState(false);\r\n  const selectRef=useRef(null);\r\n  const onBlur=(e) => {\r\n    props.onBlur(e, setValue);\r\n  }\r\n\r\n  const onChange=(e) => {\r\n    if(props.validation(e.target.value)){\r\n      props.onChange(e);\r\n      setValue(e.target.value);\r\n      setSelection([e.target.selectionStart, e.target.selectionEnd]);\r\n    } else {\r\n      setValidationMisfire(true);\r\n    }\r\n  }\r\n  const onSelect=(e) => {\r\n    if(!validationMisfired){\r\n      setSelection([e.target.selectionStart, e.target.selectionEnd]);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    if(validationMisfired) {\r\n      selectRef.current.selectionStart=selection[0];\r\n      selectRef.current.selectionEnd=selection[1];\r\n      setValidationMisfire(false);\r\n    }\r\n  }, [validationMisfired, selection]);\r\n  return(\r\n    <>\r\n      {React.cloneElement(child, { value: value, onSelect: onSelect, onChange: onChange, onBlur: onBlur, ref: mergeRefs(child.ref, selectRef)})}\r\n    </>\r\n  )\r\n});\r\nConstantValidationTextInput.defaultProps={\r\n  onChange: () => {},\r\n  onBlur: () => {},\r\n};\r\n\r\nexport default ConstantValidationTextInput;"],"sourceRoot":""}